---
layout: post
title: What's a CURIE and why you should be using them
date: 2021-09-14 09:47:00 +0100
author: Charles Tapley Hoyt
tags: semantics
---
Compact uniform resource identifiers, or CURIEs, are an important formalism for
referencing biomedical entities.

In the semantic web and ontology communities, uniform resource identifiers
(URIs) are used to reference named entities. For a given nomenclature, like
the [Chemical Entities of Biological Interest (ChEBI)](https://www.ebi.ac.uk/chebi),
URIs usually have two parts:

1. A URL prefix (in red)
2. An identifier from the given nomenclature (in orange)

All the URIs from the same nomenclature will have the same URL prefix, but a
different local identifier. Here's an example, using the ChEBI identifier for
[alsterpaullone](https://www.ebi.ac.uk/chebi/searchId.do?chebiId=CHEBI:138488):

<span style="color:red">https://www.ebi.ac.uk/chebi/searchId.do?chebiId=CHEBI:</span><span
style="color:orange">138488</span>

URIs are inconvenient because each named entity could be referenced by
potentially many URIs. For example, a URI could start with either `http`
or `https`. Even worse, there are several competing _persistent URL_ services
that each try to mint the one true URL for each. Randall Munroe's XKCD comic
sums this issue up pretty well:

<img style="max-width: 500px;" src="https://imgs.xkcd.com/comics/standards_2x.png" alt="A relevant XKCD comic on proliferating competing standards" />

For the example molecule, alsterpaullone, here are some (but not all) of the
possible URIs that could be used to reference it:

| Provider        | URI |
|-----------------|-----|
| First-party     | https://www.ebi.ac.uk/chebi/searchId.do?chebiId=CHEBI:138488 | 
| Identifiers.org | https://identifiers.org/CHEBI:24867, https://identifiers.org/CHEBI/24867, http://identifiers.org/CHEBI:24867, http://identifiers.org/CHEBI/24867 | 
| PURL            | http://purl.obolibrary.org/obo/CHEBI_24867 |
| N2T             | https://n2t.net/chebi:24867 |

The real issue with URIs is that the URL prefix (the beginning part) doesn't
really tell you anything. In fact, given a URI, you usually have to do some
detective work to figure out which nomenclature authority it goes with.

The solution is to use compact uniform resource identifiers (CURIEs), which
replace the URL prefix with a more approachable prefix. A CURIE has three parts:

1. A prefix (in red)
2. A delimiter (in black)
3. An identifier from the given nomenclature (in orange)

Since everyone agrees on what ChEBI is, it makes sense to use `chebi` as the
prefix for ChEBI identifiers. Here's the same URI, condensed as a CURIE:

<span style="color:red">chebi</span><b>:</b><span style="color:orange">138488</span>

The best part of a CURIE is that you can associate all the possible URL prefixes
with the prefix, and regenerate whatever URI you need if you're doing some
semantic web or ontology stuff. In fact, this idea is so common, that it's a
core part of the SPARQL query language, which is used both in the semantic web
and ontologies to traverse data stored in the resource description framework
(RDF) schema. Here's an example SPARQL query that has these prefixes prominently
at the top:

```sparql
prefix obo: <http://purl.obolibrary.org/obo/> 
prefix owl: <http://www.w3.org/2002/07/owl#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?x ?p ?y
WHERE {
  {?x rdfs:subClassOf [
    a owl:Restriction ;
    owl:onProperty ?p ;
    owl:someValuesFrom ?y ] 
  }
  UNION {
   ?x rdfs:subClassOf ?y .
   BIND(rdfs:subClassOf AS ?p)
  }
  ?x a owl:Class .
  ?y a owl:Class .
}
```

This example was borrowed from the SPARQL queries in the repository for the
[Core Ontology for Biology and Biomedicine (COB)](https://github.com/OBOFoundry/COB/blob/master/src/sparql/edges.sparql).
You don't have to understand the SPARQL itself, just check the first 4 lines
that start with `prefix ...`.

---

The last trick with CURIEs is that you need a registry of prefixes that tells
you which one goes with each nomenclature, and can translate CURIEs into URIs.
Identifiers.org and N2T.net are two examples, but there are several problems
that the INDRA team is currently trying to solve with the
[Bioregistry](https://bioregistry.io). Look forward to our upcoming paper!
